# Homework 3.6

1. done

2. На 2.4 ГГц есть три непересекающихся канала (при ширине канала в 20 ГГц) - 1,6,11. К непересакающимся также можно 
   отнести 2-7-12 и 3-8-13, но 12 и 13 поддерживаются не всеми устройствами.
    
   На 5 ГГц при ширине в 20 ГГц все каналы являются изолированными. Всего их 25. В России сейчас, вроде как, разрешены
   17 из них.
    
3. 38:f9:d3 - Apple

4. 8,949 байт

5. Нет. SYN может быть только при попытке открыть соединение и в ответе сервера на это сообщение. При нормальной работе,
   клиент не должен пытаться одновременно открыть и закрыть соединение. Соответственно, в ACK'е от сервера, тоже не
   может быть одновременно этих двух флагов. 
   
   Такие пакеты обычно используют для DDoS атак.

6. Это UDP сокет, он не может поддерживать соединение. Поэтому нет. Вроде там может ещё быть статус ESTAB и всё.

7. Узел А (инициатор) и узел В. Вначале оба в ESTABLISHED

   1. А отправляет FIN, переходит в FIN-WAIT-1
   2. В получает FIN, переходит в CLOSE-WAIT, отправляет в ответ АСК
   3. А получает АСК, переходит в FIN-WAIT-2
   4. В завершает передачу, отправляет FIN, переходит в LAST-ACK
   5. А получает FIN, отправляет АСК, переходит в TIME-WAIT, ждет 2 MSL и закрывает соединение
   6. В получает АСК и закрывает соединение
   7. Оба в CLOSED
   
8. При общении только двух машин и без дополнительных условий, может быть не более 65536 соединений. Потому что в TCP
   для сопоставления пакетов с соединениями используется 4 основных поля - порт и адрес отправки и порт и адрес
   назначения. В случае двух устройств, будет отличаться лишь порт назначения, а он ограничен двумя байтами.
   
   Но если клиентов несколько, то у сервера может быть больше одного соединения на порт. Насколько я понимаю, всё
   упирается в максимальное количество открытых файловых дескрипторов, но этот лимит можно увеличить.
   
   Видимо, реальное ограничение не жесткое и зависит от мощности железа и оптимизации ПО.

9. Такое может случиться, если клиент совершает много кратковременных подключений к серверу. В целом, это не особо
   плохо, пока количество таких соединений на одного клиента не превышает число доступных портов - в этом случае 
   клиент не сможет подключиться повторно, пока не освободится какой-нибудь порт. Причем неважно, висят ли они на 
   стороне клиента или сервера.
   
   Ну и наверное, при большом количестве таких соединений от множества клиентов, может возникнуть проблема с 
   производительностью сервера, ведь они расходуют память.
   
10. UDP не гарантирует доставку данных. Если пакет фрагментировался и хотя бы один фрагмент не дошел до получателя,
    То он не сможет собрать пакет и потеряет вообще все данные.
    
11. Логично сделать это настраиваемым. Например, внутри локальной сети можно передавать данные по UDP - шанс потерь
    довольно мал, а если хостов очень много - то незачем нагружать сеть. Данные можно аггрегировать на одном
    устройстве, а при необходимости переслать куда-то наружу, лучше использовать UDP чтобы ничего не потерять.
    
    В syslog, похоже, реализованы оба протокола. По крайней мере все источники говорят именно об этом. Видимо, 
    действительно можно настраивать в зависимости от ситуации.
    
12. ```
    vagrant@vagrant:~$ ss -tapl
    State   Recv-Q  Send-Q    Local Address:Port       Peer Address:Port  Process  
    LISTEN  0       4096            0.0.0.0:sunrpc          0.0.0.0:*              
    LISTEN  0       4096      127.0.0.53%lo:domain          0.0.0.0:*              
    LISTEN  0       128             0.0.0.0:ssh             0.0.0.0:*              
    LISTEN  0       4096          127.0.0.1:8125            0.0.0.0:*              
    LISTEN  0       4096            0.0.0.0:19999           0.0.0.0:*              
    LISTEN  0       4096               [::]:sunrpc             [::]:*              
    LISTEN  0       128                [::]:ssh                [::]:*              
    LISTEN  0       4096              [::1]:8125               [::]:*
    ```
    
    Хм, процесс нигде не указан. Это DNS, sunrpc, ssh. Также порт 19999 остался от предыдущего задания, через него
    работает node_exporter. А вот что за 8125 я не знаю и не могу нигде найти =(
    
13. С текстом - `sudo tcpdump -A`
    C текстом и hex - `sudo tcpdump -X`
    
14. Там может быть флаг DF - не фрагментировать, либо флаг MF - пакет не окончен и будут ещё фрагменты.
    В основном, стоит DF, либо вообще нет флагов.
    
    Ethernet II

    Да, в заголовках Ethernet есть MAC-адрес и, соответственно, OUI. Он даже уже прям в дампе резолвится в название
    производителя `Dst: RealtekU_12:35:02 (52:54:00:12:35:02)`. Но это, наверное, делает tshark.