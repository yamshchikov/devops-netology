# Homework 3.7

1. Нужно окно в 36621.1 килобайт:
   
   ![](https://i.imgur.com/66SfEXS.png)

2. Не совсем понял вопрос. Во сколько раз упадет относительно чего?

   Если потерь совсем нет, то скорость ограничена размером окна, пропускной способностью канала. Рассчитывается как 
   RWIN/RTT. То есть, если у нас есть канал 100 Мбит/с, то теоретически, он может быть использован весь.
   
   Если же есть потери, то вводится новое ограничение, которое зависит от максимального размера сегмента и пинга.
   Допустим, MSS=1460 byte, RTT=100 ms, Loss=1%. Тогда максимальная пропускная способность канала будет равна 1.17
   Мбит/с. По формуле MSS/(RTT*sqrt(Loss)).
   
   Если мы изначально имели канал 100 Мбит/с, то скорость упала в 85 раз. Если же изначально был канал 1 Гбит/с, то
   скорость упала в 854 раза.
   
3. Размер фрейма - 1526 байт, размер полезных данных в нём - 1460 байт (минус заголовки Ethernet, IP, TCP).
   1460*100/1526 = 95.7% - это процент полезных данных в фрейме. Соответственно, реальная скорость будет не выше
   95.7 Мбит/с. Надеюсь, это действительно можно так просто экстраполировать с полезной нагрузки фрейма на скорость в 
   целом =)
   
   Только меня немного напрягает преамбула фрейма. Где-то про неё забывают и считают, что размер фрейма 1518, а 
   где-то учитывают. Перерыл с пару десятков разных источников, но так и не понял наверняка. Полагаю, что таки
   стоит её учитывать, ведь она всё же передается между устройствами, а значит тратит ресурс.
   
4. Для резолва адреса создается клон процесса. Клонированный процесс делает следующее:
   1. Читает nsswitch.conf, который содержит список источников, откуда брать инфу.
   2. Читает resolv.conf, где содержатся адреса DNS серверов. Там указан 127.0.0.53 - локальный DNS.
   3. Читает hosts.conf, где можно вручную задать соответствие доменов и адресов.
   4. Читает stub-resolv.conf. Там то же самое, что и в resolv.conf.
   5. Отправляет запрос на 127.0.0.53.
   6. Получает ответ от 127.0.0.53.
   
   Далее я теряюсь. Клонированный процесс ещё чем-то обменивается с родителем, но не могу понять чем. И после этого
   уже устанавливает соединение со всеми тремя полученными адресами. Видимо, они были в ответе от локального DNS, но
   я не понимаю, как его расшифровывать.
   
   Ещё потом он пытается соединиться с IPv6 адресами, но не получается. Клонированный процесс завершается и дальше уже
   родительский запрашивает всю нужную ему информацию.
   
5. Четыре запроса - корневой, uk., co.uk., google.co.uk.

6. 32 - 25 = 7; 2 ^ 7 = 128; 128 - 3 = 125 адресов. Минус 3 это адрес сети, адрес шлюза и широковещательный.  
   255.248.0.0 это /13. Далее 2 ^ 19 = 524288. И ещё минус 3 = 524285 адресов.
   
7. В 23. 512 против 256.

8. Да, это будут подсети с маской /15.